<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
		<style type="text/css">
      .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6 {
        text-transform: none;
      }
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
        <section data-markdown="" data-separator="^\n---$" data-separator-vertical="^\n>>>$">
        <script type="text/template">
## 開発効率を上げるテスト設計  	  

---

## 自己紹介

* トミー
* Github : @kazu9su
* Twitter : @tooooooooomy
* PHPが得意なフレンズです！
* 勉強中の言語: rust,ocaml,lisp

---

## 開発効率が上がる状況とは？

---

## A: いろいろありそう

---

### 最も開発効率が落ちるのはどんなときか？

---

#### A: 自分以外のメンバーに手戻りが発生するとき

---

#### 自分のミスでできるだけ手戻りを発生させない
#### = 開発効率があがる!

---

### そんなテストを設計したい

---

## 具体例

---

### 現在のプロジェクトのメンバー構成

* サーバーサイド: 1人(自分)
* フロントエンド: 2人

---

### 手戻りを発生させたくない相手
### =フロントエンド開発中のメンバー

---

### サーバーサイドの処理イメージ

* jsonを受け取ったらjson-schemaでバリデーションをする
* バリデーションエラーで400を返す
* 例外が発生したら500を返す
* ビジネスロジックを適用し、成功したら200を返す

---

### フロントとのやりとりという観点だと、
### json-schemaの定義チェックがとても重要
### = 一番テストに力を入れる

---

## テスト設計

---

### レベル: json-schemaの定義

* 細かい異常系のテストケースは結構スルーしがち
* 一番テストを書いといたほうがいいところ
  * 成功パターンは一つだが、異常系のパターンは複数ある
  * json-schemaの定義が間違っている(意図した挙動をしていない)と、フロントに手戻りが発生する可能性大！

---

### レベル: バリデーター

* バリデーションが成功したとき、失敗したときのそれぞれの挙動のテスト

---

### レベル: コントローラー

* 処理成功のテスト
* バリデーションエラーのテスト
* 例外のテスト

---

#### ビジネスロジックはあたりまえにテストされると思うので割愛！

---

### これだけ事前にテストできていれば…

* フロントエンドとの連携も(きっと)スムーズ！！

---

## 終わりに

* 開発効率悪いなーと感じたら、意識してみてください！
* [example](https://github.com/kazu9su/phpblt-6-example) も用意しました！

---

## すっごーい！
![すっごーい！](./img/serval.jpg)

---

## ご清聴ありがとうございました

        </script>
        </section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
